import{d as x,u as V,r as k,b as c,l as f,c as n,a as e,w as E,e as m,t as h,g as r,v as l,j as U,o as i,_ as R}from"./index-CpEXMNlz.js";const S={id:"register"},N={class:"container"},P={class:"card card-body mt-4"},B={key:0,class:"error-message text-danger mb-4"},C={class:"mb-3"},D={class:"mb-3"},L={class:"mb-3"},M={class:"mb-3"},j={key:0,class:"text-danger"},I={class:"mb-3"},A={key:0,class:"text-danger"},F={class:"mb-3"},T={key:0,class:"text-danger"},Y=x({__name:"RegisterView",setup($){const w=V(),b=U(),t=k({username:"",email:"",first_name:"",last_name:"",password:"",password_confirm:""}),d=c(!1);async function v(){if(!t.email){d.value=!1;return}try{const s=await(await fetch(`/api/auth/check-email?email=${t.email}`)).json();d.value=s.exists}catch(o){console.error("Error al verificar el email:",o),d.value=!1}}const u=c(""),p=c(!1),_=f(()=>t.password.length>0&&t.password.length<6),g=f(()=>t.password_confirm.length>0&&t.password_confirm.length<6);f(()=>p.value);async function y(){p.value=t.password.length>=6,p.value&&await w.register(t).then(o=>{b.replace({name:"login"})}).catch(o=>{u.value=o.message})}return(o,s)=>(i(),n("div",S,[e("div",N,[e("div",P,[s[13]||(s[13]=e("h5",{class:"card-title"},"Register",-1)),e("form",{onSubmit:E(y,["prevent"])},[u.value?(i(),n("p",B,h(u.value),1)):m("",!0),e("div",C,[s[6]||(s[6]=e("label",{for:"username",class:"form-label"},"Username",-1)),r(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.username=a),type:"text",class:"form-control",id:"username",autocomplete:"off"},null,512),[[l,t.username]])]),e("div",D,[s[7]||(s[7]=e("label",{for:"first_name",class:"form-label"},"First Name",-1)),r(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.first_name=a),type:"text",class:"form-control",id:"first_name",autocomplete:"off"},null,512),[[l,t.first_name]])]),e("div",L,[s[8]||(s[8]=e("label",{for:"last_name",class:"form-label"},"Last Name",-1)),r(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.last_name=a),type:"text",class:"form-control",id:"last_name",autocomplete:"off"},null,512),[[l,t.last_name]])]),e("div",M,[s[9]||(s[9]=e("label",{for:"email",class:"form-label"},"Email address",-1)),r(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.email=a),onInput:v,type:"email",class:"form-control",id:"email",autocomplete:"off"},null,544),[[l,t.email]]),d.value?(i(),n("span",j,"Ya existe un usuario con este correo")):m("",!0)]),e("div",I,[s[10]||(s[10]=e("label",{for:"password",class:"form-label"},"Password",-1)),r(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.password=a),type:"password",class:"form-control",id:"password"},null,512),[[l,t.password]]),_.value?(i(),n("span",A,"La contraseña debe tener al menos 6 caracteres")):m("",!0)]),e("div",F,[s[11]||(s[11]=e("label",{for:"password_confirm",class:"form-label"},"Confirm Password",-1)),r(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>t.password_confirm=a),type:"password",class:"form-control",id:"password_confirm"},null,512),[[l,t.password_confirm]]),g.value?(i(),n("span",T,"La contraseña debe tener al menos 6 caracteres")):m("",!0)]),s[12]||(s[12]=e("button",{type:"submit",class:"btn btn-success"},"Register",-1))],32)])])]))}}),z=R(Y,[["__scopeId","data-v-42cc07a7"]]);export{z as default};
