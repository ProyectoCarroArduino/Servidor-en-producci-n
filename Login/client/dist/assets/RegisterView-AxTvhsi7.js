import{d as V,u as k,r as S,b as f,m as h,o as i,c,a as s,w as E,t as U,g as u,f as l,v as n,k as R,p as I,l as N,_ as P}from"./index-giYzRquH.js";const o=d=>(I("data-v-42cc07a7"),d=d(),N(),d),B={id:"register"},C={class:"container"},D={class:"card card-body mt-4"},L=o(()=>s("h5",{class:"card-title"},"Register",-1)),M={key:0,class:"error-message text-danger mb-4"},j={class:"mb-3"},A=o(()=>s("label",{for:"username",class:"form-label"},"Username",-1)),F={class:"mb-3"},T=o(()=>s("label",{for:"first_name",class:"form-label"},"First Name",-1)),Y={class:"mb-3"},$=o(()=>s("label",{for:"last_name",class:"form-label"},"Last Name",-1)),q={class:"mb-3"},z=o(()=>s("label",{for:"email",class:"form-label"},"Email address",-1)),G={key:0,class:"text-danger"},H={class:"mb-3"},J=o(()=>s("label",{for:"password",class:"form-label"},"Password",-1)),K={key:0,class:"text-danger"},O={class:"mb-3"},Q=o(()=>s("label",{for:"password_confirm",class:"form-label"},"Confirm Password",-1)),W={key:0,class:"text-danger"},X=o(()=>s("button",{type:"submit",class:"btn btn-success"},"Register",-1)),Z=V({__name:"RegisterView",setup(d){const w=k(),b=R(),e=S({username:"",email:"",first_name:"",last_name:"",password:"",password_confirm:""}),m=f(!1);async function v(){if(!e.email){m.value=!1;return}try{const a=await(await fetch(`/api/auth/check-email?email=${e.email}`)).json();m.value=a.exists}catch(r){console.error("Error al verificar el email:",r),m.value=!1}}const p=f(""),_=f(!1),g=h(()=>e.password.length>0&&e.password.length<6),y=h(()=>e.password_confirm.length>0&&e.password_confirm.length<6);h(()=>_.value);async function x(){_.value=e.password.length>=6,_.value&&await w.register(e).then(r=>{b.replace({name:"login"})}).catch(r=>{p.value=r.message})}return(r,a)=>(i(),c("div",B,[s("div",C,[s("div",D,[L,s("form",{onSubmit:E(x,["prevent"])},[p.value?(i(),c("p",M,U(p.value),1)):u("",!0),s("div",j,[A,l(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>e.username=t),type:"text",class:"form-control",id:"username",autocomplete:"off"},null,512),[[n,e.username]])]),s("div",F,[T,l(s("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>e.first_name=t),type:"text",class:"form-control",id:"first_name",autocomplete:"off"},null,512),[[n,e.first_name]])]),s("div",Y,[$,l(s("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>e.last_name=t),type:"text",class:"form-control",id:"last_name",autocomplete:"off"},null,512),[[n,e.last_name]])]),s("div",q,[z,l(s("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>e.email=t),onInput:v,type:"email",class:"form-control",id:"email",autocomplete:"off"},null,544),[[n,e.email]]),m.value?(i(),c("span",G,"Ya existe un usuario con este correo")):u("",!0)]),s("div",H,[J,l(s("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>e.password=t),type:"password",class:"form-control",id:"password"},null,512),[[n,e.password]]),g.value?(i(),c("span",K,"La contraseña debe tener al menos 6 caracteres")):u("",!0)]),s("div",O,[Q,l(s("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>e.password_confirm=t),type:"password",class:"form-control",id:"password_confirm"},null,512),[[n,e.password_confirm]]),y.value?(i(),c("span",W,"La contraseña debe tener al menos 6 caracteres")):u("",!0)]),X],32)])])]))}}),es=P(Z,[["__scopeId","data-v-42cc07a7"]]);export{es as default};
